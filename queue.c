#include "queue.h"


// ????????????? ???????
void initQueue(Queue* q) {
    q->BegL = NULL;
    q->EndL = NULL;
    q->size = 0;
}

// ?????????? ???????? ? ???????
void enqueue(Queue* q, int value) {
    Elem* newElem = (Elem*)malloc(sizeof(Elem));
    newElem->data = value; 
    newElem->next = NULL;
    
    if (q->size == 0) {
        // ???? ??????? ?????
        q->BegL = newElem;
        q->EndL = newElem;
    } else {
        // ???? ? ??????? ??? ???? ????????
        q->EndL->next = newElem;
        q->EndL = newElem;
    }
    q->size++;
}

// ????? ???????
void printQueue(Queue* q) {
    printf("??????? (%d ?????????): ", q->size);
    Elem* current = q->BegL;
    while (current != NULL) {
        printf("%d ", current->data);
        current = current->next;
    }
    printf("\n");
}

// ??????? ??????
void freeQueue(Queue* q) {
    Elem* current = q->BegL;
    Elem* next;

    while (current != NULL) {
        next = current->next;
        free(current);
        current = next;
    }  
    q->BegL = NULL;
    q->EndL = NULL;
    q->size = 0;
}


// ?????? ????? ? ????
void writeToFile(const char* filename, Queue* q) {
    FILE* file = fopen(filename, "w");
    
    if (file == NULL) {
        return;
    }
    
    // ?????????? ????? ?? ??????? ? ????
    Elem* current = q->BegL;
    while (current != NULL) {
        fprintf(file, "%d ", current->data);
        current = current->next;
    }
    
    fclose(file);
    printf("????? ???????? ? ???? '%s'\n", filename);
}
